<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>聊天室</title>
	<link rel="stylesheet" href="./dist/css/chartroom.css"/>
	<link href="//nos.netease.com/vod163/nep.min.css" rel="stylesheet">
	<link href="/jquery.barrager/css/barrager.css" rel="stylesheet" />
</head>
<body>
	<div class="m-head">
		<div class="g-doc">
			<div class="logo item">聊天室demo</div>
			<div class="nav item">
				<a href="./list.html">首页</a>
			</div>
			<div class="info item">
				<img src="./images/default-icon.png" alt="头像" id="avatar">
				<a href="./roomManage.html" id="nickName">未登录</a>
			</div>
			<div class="action item"><a href="./anchor.html"><b class="icon"></b>我要当主播</a></div>
		</div>
	</div>
	<div class="g-doc">
		<div class="m-room" id="room">
			<div class="g-left">
				<div class="info">
					<div class="avatar">
						<img class="image" id="roomAvatar" src="./images/default-icon.png"/>
					</div>
					<div class="detail">
						<p class="title" id="roomTitle">房间名</p>
						<p class="desc">主播：<span id="roomCreator"></span>&nbsp;&nbsp;在线人数：<span id="roomOnlineMemberNum"></span></p>
					</div>
				</div>
				<div class="media">
					<video id="my-video" class="video-js vjs-big-play-centered vjs-live" x-webkit-airplay="allow" webkit-playsinline controls poster="//nos.netease.com/vod163/poster.png" preload="auto" width="744" height="453" data-setup="{}">
						<!--<source src="//nos.netease.com/vod163/demo.mp4" type="video/mp4">-->
					</video>
				</div>
			</div>
			<div class="g-right">
				<div class="m-status" id="linkStatus">连接中。。。</div>
				<div class="announcement_title">
					直播公告
				</div>
				<div class="announcement" id="roomAnnouncement">
				</div>
				<ul class="tab">
					<li class="crt j-tab" data-value="chat">直播互动</li>
					<li class="j-tab" data-value="member">在线成员</li>
				</ul>
				<div class="chat j-pannel j-chat">
				</div>
				<div class="member j-pannel hide">
					<div class="list j-member">
					</div>
					<div class="more j-more">
						<a>加载更多</a>
					</div>
				</div>
				<div class="edit">
					<textarea class="editText" id="editText" placeholder="Ctrl+Enter快速发送"></textarea>
				</div>
				<div class="sendBtn">
					<div id="emojiTag"></div>
					<a class="u-btn btn" id="sentText">发送</a>
					<a class="u-btn btn" id="zhuzi">竹子</a>
					<a class="btn custom" id="customBtn"></a>
					<a class="btn emoji" id="emoji"></a>
				</div>
			</div>
		</div>
	</div>
	<div id="menu" class="m-menu" style="display:none">
		<ul>
			<li class="j-item j-kick" data-type="0"  title="移除直播室">踢人</li>
			<li class="j-item j-gag" data-type="1"  title="禁止发言">禁言</li>
			<li class="j-item j-black" data-type="2"  title="永久不能进入该直播间">拉黑该用户</li>
			<li class="j-item admin j-admin" data-type="3">任命管理员</li>
		</ul>
	</div>
	<script src="../js/config.js"></script>
	<script src="./dist/js/title.js"></script>
	<script src="../../3rd/jquery-1.11.3.min.js"></script>
	<script src="../../3rd/NIM_Web_SDK_v3.8.0.js"></script>
	<script src="//nos.netease.com/vod163/nep.min.js"></script>
	<script src="./dist/js/util.js"></script>
	<script src="./dist/js/emoji.js"></script>
	<script src="./dist/js/link.js?v=5"></script>
	<script src="./dist/js/room.js"></script>
	<script src="/jquery.barrager/js/jquery.barrager.js"></script>
	<script>

        var myPlayer;
        //获取咱们组件的基类，所有组件都要继承自这个类。
        var Component = neplayer.getComponent("Component");

        //nePlayer.extend  继承基类
        //第二个参数是一个对象，包含createEl方法，这个方法中需要返回一个html元素
        //这个组件元素在后面将被添加到播放容器中
        var RefreshComponent = neplayer.extend(Component,{
            createEl:function(){
                var button = document.createElement("button");
                button.innerHTML = "刷新";
                return button;
            }
        });

        //实例化这个组件
        var refreshComponent = new RefreshComponent();

        //组件基类实现了事件绑定相关的接口，可以使用on绑定事件，off解绑事件
        //这里给组件绑定了click事件，当点击组件元素的时候会触发
        refreshComponent.on("click",function(){
            console.log("click refresh button component");
            myPlayer.refresh();
        });

        //组件被销毁时触发，可以在这里做一些回收操作，防止内存泄露
        refreshComponent.on("dispose",function(){
            console.log("dispose refresh button component");
        });
        //可以使用refreshComponent.dispose()来移除并销毁这个组件
//        controlBar:{
//            'volumeMenuButton':true
//        }
        myPlayer = neplayer("my-video",{
			    "autoplay": true,
				controlBar:{
            		'volumeMenuButton':true
        		}
        	}, function(){
            // 当播放器初始化完成时运行的回调函数


            //myPlayer.corePlayer是播放器组件的基础容器，可以看做组件树的根节点
            //myPlayer.corePlayer.controlBar 拿到默认组件controlBar
            //使用组件的addChild方法来添加子组件
            //addChild第二个参数传空对象就好，第三个参数为一个数值，代表子组件元素添加到父组件所在的位置
            //第三个参数传空时表示添加到父组件的末尾，这里值为1表示为父组件孩子中的第二个节点
            myPlayer.corePlayer.controlBar.addChild(refreshComponent,{},1);
            myPlayer.setDataSource([
                {src:"http://flvf5716af4.live.126.net/live/917228e815144f548e20551066d28ac0.flv?netease=flvf5716af4.live.126.net",type:"video/x-flv"},
                {src:"http://pullhlsf5716af4.live.126.net/live/917228e815144f548e20551066d28ac0/playlist.m3u8",type:"application/x-mpegURL"},
                {src:"rtmp://vf5716af4.live.126.net/live/917228e815144f548e20551066d28ac0",type:"rtmp/flv "}
            ]);
        });
	</script>
</body>
</html>